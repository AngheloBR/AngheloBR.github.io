<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Lab 004 · NAS casero con Debian</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <style>
    :root {
      --bg: #02040a;
      --bg-card: #020617;
      --border: #1f2937;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #f973a6;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text);
      background-color: var(--bg);
      background-image:
        radial-gradient(circle at 0% 0%, rgba(148,163,255,0.18) 0, transparent 55%),
        radial-gradient(circle at 100% 10%, rgba(56,189,248,0.14) 0, transparent 60%);
      background-attachment: fixed;
      background-repeat: no-repeat;
    }
    .page { max-width: 900px; margin: 0 auto; padding: 24px 16px 32px; }
    a.back-link { font-size: 0.85rem; color: var(--muted); text-decoration: none; }
    a.back-link:hover { color: var(--accent); }
    .card {
      margin-top: 16px;
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid rgba(148,163,184,0.35);
      padding: 18px 20px 22px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.7);
    }
    h1 { margin: 0 0 8px; font-size: 1.4rem; }
    h2 { margin-top: 20px; font-size: 1rem; }
    p { font-size: 0.9rem; color: var(--muted); }
    strong { color: #e5e7eb; }
    code, pre {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.8rem;
    }
    pre {
      background: #020617;
      border-radius: 12px;
      border: 1px solid #111827;
      padding: 10px 12px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="page">
    <a href="index.html" class="back-link">← Volver al índice</a>

    <article class="card">
      <header>
        <h1>Lab 004 · NAS casero con Debian</h1>
        <p>
          Objetivo: montar un <strong>NAS sencillo</strong> con Debian usando
          Samba para compartir una carpeta en tu red local (backups, ISOs, etc.).
        </p>
      </header>

      <h2>1. Supuestos del lab</h2>
      <p>
        • Servidor Debian 13 con un disco o partición para datos (ej: <code>/dev/sdb</code>).<br>
        • Red local tipo <code>192.168.1.0/24</code>.<br>
        • Clientes Windows y/o Linux que se conectan al NAS.
      </p>

      <h2>2. Preparar el almacenamiento</h2>
      <p>Ejemplo sencillo: un solo disco en ext4.</p>

      <pre><code># Crear sistema de archivos (¡cuidado, borra el disco!)
sudo mkfs.ext4 /dev/sdb

# Crear punto de montaje
sudo mkdir -p /srv/nas/datos

# Montar
sudo mount /dev/sdb /srv/nas/datos</code></pre>

      <p>
        Para montarlo siempre al iniciar, añade una entrada en <code>/etc/fstab</code> (opcional).
      </p>

      <h2>3. Instalar y configurar Samba</h2>
      <pre><code>sudo apt update
sudo apt install -y samba</code></pre>

      <p>Crear un usuario de sistema para el NAS (o usar uno existente):</p>

      <pre><code>sudo useradd -m nasuser
sudo passwd nasuser</code></pre>

      <p>Dar permisos sobre la carpeta compartida:</p>

      <pre><code>sudo chown -R nasuser:nasuser /srv/nas/datos
sudo chmod -R 750 /srv/nas/datos</code></pre>

      <p>Editar <code>/etc/samba/smb.conf</code> y añadir al final:</p>

      <pre><code>[nas-datos]
   path = /srv/nas/datos
   browseable = yes
   read only = no
   valid users = nasuser
   create mask = 0640
   directory mask = 0750</code></pre>

      <p>Crear la contraseña de Samba para ese usuario:</p>

      <pre><code>sudo smbpasswd -a nasuser</code></pre>

      <pre><code>sudo systemctl restart smbd
sudo systemctl status smbd</code></pre>

      <h2>4. Firewall y acceso desde la red</h2>
      <pre><code># Si usas UFW
sudo ufw allow Samba
sudo ufw status</code></pre>

      <p>
        Desde Windows, prueba a entrar en la barra de direcciones del explorador:
      </p>

      <pre><code>\\IP_DEL_NAS\nas-datos</code></pre>

      <p>
        Desde Linux (como cliente):
      </p>

      <pre><code>sudo apt install -y cifs-utils

sudo mount -t cifs //IP_DEL_NAS/nas-datos /mnt \
  -o username=nasuser</code></pre>

      <h2>5. Ideas para mejorarlo</h2>
      <p>
        • Meter RAID (mdadm) o ZFS para más tolerancia a fallos.<br>
        • Activar snapshots y backups hacia otro disco o nube.<br>
        • Integrarlo con tu lab de VPN para acceder al NAS desde fuera de casa.
      </p>
    </article>
  </div>
</body>
</html>
